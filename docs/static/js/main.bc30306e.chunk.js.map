{"version":3,"sources":["components/VerticalStepsList/status.js","components/VerticalStepsList/index.js","items/Marker.js","items/Checkbox.js","pages/Advance.js","api/index.js","pages/Basic.js","App.js","index.js"],"names":["VSL_STATUS","DONE","PENDING","COMING","VerticalStepsList","initItems","items","props","useState","setItems","called","setCalled","checkedHandler","i","a","callback","Function","callbackResponse","Promise","produce","draft","disabled","promiseResponse","console","error","status","update","availableProps","key","isValidElement","className","classNames","map","item","itemFilter","Fragment","coming","type","onClick","onChange","e","target","checked","preventCheckboxHandler","style","display","checkbox","marker","textFilter","text","meta","length","children","done","child","j","childFilter","Marker","src","Checkbox","Advance","VPL_STATUS","time","this","resolve","setTimeout","now","Date","hours","getHours","toString","padStart","minutes","getMinutes","then","res","reject","Error","catch","err","alert","Basic","App","maxWidth","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bc30306e.chunk.js","sourcesContent":["const VSL_STATUS = {\r\n  DONE: 0,\r\n  PENDING: 1,\r\n  COMING: 2\r\n}\r\n\r\nexport default VSL_STATUS\r\n","import classNames from 'classnames'\r\nimport React, { isValidElement, useState } from 'react'\r\nimport VSL_STATUS from './status'\r\nimport './index.scss'\r\nimport produce from 'immer'\r\n\r\nfunction VerticalStepsList ({ items: initItems, ...props }) {\r\n  const [items, setItems] = useState(initItems)\r\n  const [called, setCalled] = useState(false)\r\n\r\n  const checkedHandler = async (i) => {\r\n    if (items[i].callback instanceof Function) {\r\n      if (called) {\r\n        return\r\n      }\r\n\r\n      setCalled(true)\r\n      const callbackResponse = items[i].callback()\r\n      if (callbackResponse instanceof Promise) {\r\n        setItems(produce(items, draft => {\r\n          draft[i].disabled = true\r\n        }))\r\n        try {\r\n          const promiseResponse = await callbackResponse\r\n          setCalled(false)\r\n          setItems(produce(items, draft => {\r\n            draft[i].disabled = false\r\n          }))\r\n          if (promiseResponse === false) {\r\n            return\r\n          }\r\n        } catch (err) {\r\n          setCalled(false)\r\n          setItems(produce(items, draft => {\r\n            draft[i].disabled = false\r\n          }))\r\n          console.error(err)\r\n          return\r\n        }\r\n      }\r\n\r\n      setCalled(false)\r\n      if (callbackResponse === false) {\r\n        return\r\n      }\r\n    }\r\n\r\n    setItems(produce(items, draft => {\r\n      draft[i].status = VSL_STATUS.DONE\r\n\r\n      if (draft[i + 1]) {\r\n        draft[i + 1].status = VSL_STATUS.PENDING\r\n      }\r\n\r\n      if (draft[i].update instanceof Function) {\r\n        draft[i] = draft[i].update()\r\n      }\r\n    }))\r\n  }\r\n\r\n  const availableProps = {}\r\n  for (const key in props) {\r\n    if ((props[key] instanceof Function || isValidElement(props[key])) === false) {\r\n      availableProps[key] = props[key]\r\n    }\r\n  }\r\n\r\n  const preventCheckboxHandler = e => {\r\n    e.target.checked = false\r\n  }\r\n\r\n  return (\r\n        <div {...availableProps} className={classNames('vsl-list', props.className)}>\r\n            {items.map((item, i) => {\r\n              item = (props.itemFilter instanceof Function && props.itemFilter(item)) || item\r\n\r\n              return (\r\n                    <React.Fragment key={i}>\r\n                        <div className={classNames('node', {\r\n                          coming: item.status === VSL_STATUS.COMING\r\n                        })} >\r\n                            <label>\r\n                              { item.status === VSL_STATUS.PENDING\r\n                                ? (\r\n                                  <>\r\n                                    <input\r\n                                      type=\"checkbox\"\r\n                                      onClick={() => checkedHandler(i)}\r\n                                      onChange={e => preventCheckboxHandler(e)}\r\n                                      style={{ display: 'none' }}\r\n                                    />\r\n                                    <div className={classNames({ disabled: item.disabled })}>\r\n                                    {\r\n                                      isValidElement(item.checkbox)\r\n                                        ? <>{item.checkbox}</>\r\n                                        : <div className=\"default-checkbox\"></div>\r\n                                    }\r\n                                    </div>\r\n                                  </>\r\n                                  )\r\n                                : <div className=\"marker\">\r\n                                  <>\r\n                                  {\r\n                                    isValidElement(item.marker)\r\n                                      ? <>{item.marker}</>\r\n                                      : <div className=\"circle-marker\"></div>\r\n                                  }\r\n                                  </>\r\n                                </div>\r\n                              }\r\n                              <span>\r\n                                {(props.textFilter instanceof Function && props.textFilter(item.text)) || item.text}\r\n                              </span>\r\n                            </label>\r\n                            { item.meta instanceof Function\r\n                              ? <>\r\n                                  <div className=\"meta\">{item.meta()}</div>\r\n                                </>\r\n                              : ''}\r\n                        </div>\r\n\r\n                        { items.length - 1 > i && !item.children && <div className={classNames('line', {\r\n                          coming: items[i + 1].status === VSL_STATUS.COMING\r\n                        })}></div>}\r\n\r\n                        { item.children && (\r\n                            <div className={classNames('children', {\r\n                              coming: items[i].status === VSL_STATUS.COMING,\r\n                              done: items[i].status === VSL_STATUS.DONE\r\n                            })}>\r\n                                <div className=\"line\"></div>\r\n                                <div>\r\n                                  {item.children.map((child, j) => (\r\n                                    <div key={j}>\r\n                                        {(props.childFilter instanceof Function && props.childFilter(child.text)) || child.text}\r\n                                      </div>\r\n                                  ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </React.Fragment>\r\n              )\r\n            })}\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default VerticalStepsList\r\n","import React from 'react'\r\n\r\nfunction Marker () {\r\n  return (\r\n    <img src=\"https://img.icons8.com/fluency/48/000000/popular-topic.png\"/>\r\n  )\r\n}\r\n\r\nexport default Marker\r\n","import React from 'react'\r\n\r\nfunction Checkbox () {\r\n  return (\r\n    <img src=\"https://img.icons8.com/fluency/48/000000/my-topic.png\"/>\r\n  )\r\n}\r\n\r\nexport default Checkbox\r\n","import React from 'react'\r\nimport VPL_STATUS from '../components/VerticalStepsList/status'\r\nimport VerticalProgressList from '../components/VerticalStepsList'\r\nimport { error, save } from 'api'\r\nimport Marker from 'items/Marker'\r\nimport Checkbox from 'items/Checkbox'\r\n\r\nfunction Advance () {\r\n  const items = [{\r\n    text: 'Progress 1',\r\n    status: VPL_STATUS.DONE,\r\n    time: '12:00',\r\n    meta () {\r\n      return this.time\r\n    }\r\n  }, {\r\n    text: 'Progress 2',\r\n    time: '12:30',\r\n    status: VPL_STATUS.DONE,\r\n    children: [{\r\n      text: 'Children 1'\r\n    }, {\r\n      text: 'Children 2'\r\n    }],\r\n    meta () {\r\n      return this.children.length\r\n    }\r\n  }, {\r\n    text: 'Progress 3',\r\n    status: VPL_STATUS.PENDING,\r\n    callback () {\r\n      return save().then(res => {\r\n        this.time = res.time\r\n      })\r\n    },\r\n    update () {\r\n      this.children = [{\r\n        text: 'New Children'\r\n      }]\r\n      this.text = 'Progress3 Done!'\r\n      return this\r\n    },\r\n    meta () {\r\n      return this.time\r\n    }\r\n  }, {\r\n    text: 'Progress 4',\r\n    status: VPL_STATUS.COMING,\r\n    marker: <Marker />,\r\n    checkbox: <Checkbox />\r\n  }, {\r\n    text: 'Progress 5',\r\n    status: VPL_STATUS.COMING,\r\n    callback () {\r\n      return error().catch(err => {\r\n        console.error(err)\r\n        alert('checked error.')\r\n        return false\r\n      })\r\n    }\r\n  }]\r\n\r\n  const itemFilterHandler = item => {\r\n    if (item.text === 'Progress 1') {\r\n      item.text = 'Filtered Progress 1'\r\n      item.marker = <Marker />\r\n    }\r\n\r\n    return item\r\n  }\r\n\r\n  return <VerticalProgressList\r\n    items={items}\r\n    textFilter={text => text + '!'}\r\n    childFilter={text => `Filtered ${text}`}\r\n    itemFilter={itemFilterHandler}\r\n  />\r\n}\r\n\r\nexport default Advance\r\n","export const save = () => new Promise(resolve => {\r\n  setTimeout(() => {\r\n    const now = new Date()\r\n    const hours = now.getHours().toString().padStart(2, '0')\r\n    const minutes = now.getMinutes().toString().padStart(2, '0')\r\n    const time = `${hours}:${minutes}`\r\n    resolve({\r\n      time\r\n    })\r\n  }, 1000)\r\n})\r\n\r\nexport const error = () => new Promise((resolve, reject) => {\r\n  setTimeout(() => {\r\n    reject(new Error('error'))\r\n  }, 1000)\r\n})\r\n","import React from 'react'\r\nimport VPL_STATUS from '../components/VerticalStepsList/status'\r\nimport VerticalProgressList from '../components/VerticalStepsList'\r\n\r\nfunction Basic () {\r\n  const items = [{\r\n    text: 'Progress 1',\r\n    status: VPL_STATUS.DONE,\r\n    time: '12:00'\r\n  }, {\r\n    text: 'Progress 2',\r\n    time: '12:30',\r\n    status: VPL_STATUS.DONE,\r\n    children: [{\r\n      text: 'Children 1'\r\n    }, {\r\n      text: 'Children 2'\r\n    }]\r\n  }, {\r\n    text: 'Progress 3',\r\n    status: VPL_STATUS.PENDING,\r\n    callback () {\r\n      return new Promise(resolve => {\r\n        setTimeout(() => {\r\n          resolve(true)\r\n        }, 1000)\r\n      })\r\n    }\r\n  }, {\r\n    text: 'Progress 4',\r\n    status: VPL_STATUS.COMING\r\n  }, {\r\n    text: 'Progress 5',\r\n    status: VPL_STATUS.COMING,\r\n    callback () {\r\n      return new Promise(resolve => {\r\n        setTimeout(() => {\r\n          alert('checked error.')\r\n          resolve(false)\r\n        }, 1000)\r\n      })\r\n    }\r\n  }]\r\n  return (\r\n    <div>\r\n      <VerticalProgressList\r\n        items={items}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Basic\r\n","import Advance from 'pages/Advance'\r\nimport Basic from 'pages/Basic'\r\nimport React from 'react'\r\n\r\nfunction App () {\r\n  return (\r\n    <div>\r\n      <h1>Vertical Progress List Demo</h1>\r\n      <hr />\r\n      <h2>Basic</h2>\r\n      <div style={{ maxWidth: 500 }}>\r\n        <Basic />\r\n      </div>\r\n      <hr />\r\n      <h2>Advance</h2>\r\n      <div style={{ maxWidth: 500 }}>\r\n        <Advance />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}